
#!/bin/sh

COMMIT_MSG_FILE=$1
COMMIT_MSG_HEADER=$(grep -v '^\s*#' "$COMMIT_MSG_FILE" | head -n 1)

# Mergeë‚˜ Revert ì»¤ë°‹ì€ ê²€ì‚¬í•˜ì§€ ì•Šê³  í†µê³¼ì‹œí‚´
if echo "$COMMIT_MSG_HEADER" | grep -Eq "^(Merge|Revert)"; then
  exit 0
fi

PATTERN='^(init|feat|fix|design|update|remove|add|move|rename|docs|comment|refactor|test|chore|deploy|): .+ \(#[0-9]+\)$'

# ì»¤ë°‹ ì»¨ë²¤ì…˜ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ì²´í¬
if ! echo "$COMMIT_MSG_HEADER" | grep -Eq "$PATTERN"; then
  echo "ğŸš¨ [ì»¤ë°‹ ë©”ì‹œì§€ ì—ëŸ¬] í˜•ì‹ì´ ì»¨ë²¤ì…˜ê³¼ ë‹¤ë¦…ë‹ˆë‹¤."
  echo "ğŸ‘‰ ê·œì¹™: <íƒ€ì…>: <ë‚´ìš©> (#<ì´ìŠˆë²ˆí˜¸>)"
  echo "ğŸ‘‰ ì˜ˆì‹œ: feat: ê³µí†µ ì»´í¬ë„ŒíŠ¸ í¼ë¸”ë¦¬ì‹± (#1)"
  exit 1
fi